# SLIDE 07 â€” Architecture Diagram

---

## High-Level System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             CHROME BROWSER                               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   POPUP (popup.js)   â”‚      â”‚   SERVICE WORKER (background.js)      â”‚â”‚
â”‚  â”‚                      â”‚      â”‚                                        â”‚â”‚
â”‚  â”‚ â€¢ Trust Score Displayâ”‚      â”‚ â€¢ Screenshot Capture (tabs API)        â”‚â”‚
â”‚  â”‚ â€¢ Stats Dashboard    â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ Dynamic DNR Rule Management          â”‚â”‚
â”‚  â”‚ â€¢ Language Selector  â”‚      â”‚ â€¢ Fallback AI Request Proxy            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚             â”‚ chrome.storage                    â”‚ chrome.runtime          â”‚
â”‚             â–¼                                   â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                  CONTENT SCRIPTS (ISOLATED World)                    â”‚â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚  ğŸ›¡ï¸ phishing-detector.js â”€â”€ 3-tier analysis (domainâ†’textâ†’visual)   â”‚â”‚
â”‚  â”‚  ğŸ’° terms-analyzer.js â”€â”€â”€â”€â”€ 3-stage pipeline (Summâ†’Rewriteâ†’Prompt) â”‚â”‚
â”‚  â”‚  ğŸš« ads-learner.js â”€â”€â”€â”€â”€â”€â”€â”€ AI pattern learning â†’ DNR rules        â”‚â”‚
â”‚  â”‚  âœï¸ jargon-simplifier.js â”€â”€ Text simplification (Ctrl+Shift+S)     â”‚â”‚
â”‚  â”‚  ğŸ“– dictionary.js â”€â”€â”€â”€â”€â”€â”€â”€ Word definition lookup                   â”‚â”‚
â”‚  â”‚  ğŸŒ translator.js â”€â”€â”€â”€â”€â”€â”€â”€ 10-language support                      â”‚â”‚
â”‚  â”‚  ğŸ¨ cosmetic.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CSS ad hiding                           â”‚â”‚
â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚            â”‚ CustomEvent bridge (__notesio_api_request/response)     â”‚â”‚
â”‚  â”‚            â–¼                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚                 api.js (MAIN World)                          â”‚   â”‚â”‚
â”‚  â”‚  â”‚                                                              â”‚   â”‚â”‚
â”‚  â”‚  â”‚  Direct access to Chrome Built-in AI APIs:                  â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”‚  Prompt API    â”‚ â”‚ Summarizer   â”‚ â”‚  Rewriter API â”‚     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”‚  (Gemini Nano) â”‚ â”‚  API         â”‚ â”‚               â”‚     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”‚ Translator API â”‚                                         â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              ğŸ§  CHROME BUILT-IN AI ENGINE (Gemini Nano)              â”‚â”‚
â”‚  â”‚                 Runs 100% on-device â€” zero external servers          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Two-World Communication Bridge

```
  ISOLATED World                              MAIN World
  (all content scripts)                       (api.js)
       â”‚                                           â”‚
       â”‚â”€â”€ CustomEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚   {type: __notesio_api_request,           â”‚
       â”‚    data: {action, prompt, text}}           â”‚
       â”‚                                           â”‚â”€â”€â–º Chrome AI APIs
       â”‚â—„â”€â”€ CustomEvent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     (Gemini Nano)
       â”‚   {type: __notesio_api_response,           â”‚
       â”‚    data: {result, error}}                  â”‚
       â”‚                                           â”‚
       â”‚   â±ï¸ Timeout: 120 seconds                 â”‚
```

---

## Data Persistence Layer

```
  chrome.storage.local
  â”œâ”€â”€ trustScore_{hostname}     â† 24h cache, phishing scores
  â”œâ”€â”€ adsBlocked_{hostname}     â† Per-site ad block counts
  â”œâ”€â”€ termsAnalysis_{hostname}  â† 24h cache, T&C analysis results
  â”œâ”€â”€ totalAdsBlocked           â† Global ad block counter
  â”œâ”€â”€ totalThreatsBlocked       â† Global threat counter
  â””â”€â”€ userLanguage              â† Selected UI language
```
